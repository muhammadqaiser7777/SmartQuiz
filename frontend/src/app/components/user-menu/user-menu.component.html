<div class="user-menu-container">
    <button class="user-menu-trigger" (click)="toggleMenu($event)" [class.active]="isOpen()">
        <img *ngIf="user?.picture" [src]="user.picture" alt="Profile" class="user-avatar">
        <span *ngIf="!user?.picture" class="user-avatar-placeholder">
            {{ user?.name?.charAt(0)?.toUpperCase() || 'U' }}
        </span>
    </button>

    <div class="user-dropdown" *ngIf="isOpen()">
        <div class="dropdown-header">
            <img *ngIf="user?.picture" [src]="user.picture" alt="Profile" class="dropdown-avatar">
            <span *ngIf="!user?.picture" class="dropdown-avatar-placeholder">
                {{ user?.name?.charAt(0)?.toUpperCase() || 'U' }}
            </span>
            <div class="dropdown-user-info">
                <span class="dropdown-name">{{ user?.name || 'User' }}</span>
                <span class="dropdown-email">{{ user?.email || '' }}</span>
            </div>
        </div>
        <div class="dropdown-divider"></div>
        <button class="dropdown-item logout" (click)="logout()">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Logout
        </button>
    </div>
</div>